<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Niji Trip 2026 Â· æš–è‰²ä¸»é¡Œ Â· æ‹–æ‹‰æ’åºï¼‹ä½å®¿æ¬„ä½ï¼‹å›ä¸Šä¸€æ­¥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-cream: #fff7ec;
      --blue-soft: #a9e2ff;
      --peach-soft: #ffb4a2;
      --yellow-soft: #ffe08a;
      --brown-main: #5a3b32;
      --brown-soft: #7a5446;
      --border-soft: #ead8c0;
    }
    body {
      font-family: "Noto Sans TC", system-ui, sans-serif;
      margin: 0;
      color: var(--brown-main);
      background:
        radial-gradient(circle at 0% 0%, var(--blue-soft) 0, transparent 55%),
        radial-gradient(circle at 100% 0%, var(--peach-soft) 0, transparent 55%),
        radial-gradient(circle at 50% 110%, var(--yellow-soft) 0, transparent 60%),
        var(--bg-cream);
      min-height: 100vh;
    }
    header {
      background: rgba(255, 247, 236, 0.9);
      backdrop-filter: blur(8px);
      color: var(--brown-main);
      padding: 14px 16px 6px;
      box-shadow: 0 2px 8px rgba(190, 150, 110, 0.35);
      position: relative;
      z-index: 5;
    }
    header h1 {
      margin: 0;
      font-size: 20px;
      letter-spacing: 0.06em;
    }
    header p {
      margin: 4px 0 0;
      font-size: 12px;
      opacity: 0.9;
    }
    header .hint {
      margin: 4px 0 2px;
      font-size: 11px;
      opacity: 0.85;
    }

    .day-nav {
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(255, 247, 236, 0.92);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(234, 216, 192, 0.9);
    }
    .day-nav-row {
      display: flex;
      overflow-x: auto;
      gap: 6px;
      padding: 6px 8px;
      scrollbar-width: thin;
    }
    .day-nav-row::-webkit-scrollbar { height: 4px; }
    .day-nav-row::-webkit-scrollbar-thumb {
      background: linear-gradient(90deg, var(--blue-soft), var(--peach-soft));
      border-radius: 999px;
    }
    .day-chip {
      flex: 0 0 auto;
      text-decoration: none;
      color: var(--brown-main);
      background: rgba(255, 253, 248, 0.95);
      border-radius: 999px;
      border: 1px solid rgba(234, 216, 192, 1);
      padding: 4px 10px;
      font-size: 11px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      min-width: 72px;
      box-shadow: 0 1px 3px rgba(200, 170, 130, 0.35);
    }
    .day-chip-main { font-weight: 600; font-size: 12px; }
    .day-chip-sub { font-size: 10px; opacity: 0.9; }

    .container {
      padding: 12px 14px 56px;
      max-width: 860px;
      margin: 0 auto;
    }
    .day-title {
      background: rgba(255, 253, 248, 0.96);
      padding: 8px 12px;
      border-radius: 10px;
      font-weight: 600;
      margin-top: 14px;
      box-shadow: 0 1px 4px rgba(200, 170, 130, 0.45);
      border: 1px solid var(--border-soft);
      font-size: 14px;
    }
    .spot-card {
      background: #fffdfa;
      border: 1px solid var(--border-soft);
      border-radius: 12px;
      padding: 10px 14px;
      margin-top: 8px;
      box-shadow: 0 1px 4px rgba(200, 170, 130, 0.4);
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.1s ease;
    }
    .spot-card.dragging {
      opacity: 0.8;
      box-shadow: 0 4px 10px rgba(150, 110, 80, 0.65);
      transform: scale(1.01);
    }
    .lodging-card {
      background: #fff4de;
      border-style: dashed;
    }
    .spot-text { font-size: 13px; }
    .spot-text .name-zh {
      font-weight: 600;
      font-size: 14px;
      color: var(--brown-main);
    }
    .spot-text .name-ja {
      color: #756455;
      font-size: 13px;
    }
    .spot-meta {
      font-size: 11px;
      color: #8f7b6a;
      margin-top: 3px;
    }
    .btn-row {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }
    .btn {
      border: none;
      border-radius: 999px;
      padding: 5px 10px;
      font-size: 11px;
      cursor: pointer;
      background: #ffd48d;
      color: var(--brown-main);
      box-shadow: 0 1px 4px rgba(190, 150, 110, 0.5);
    }
    .btn.secondary {
      background: #fff7ec;
      border: 1px solid var(--border-soft);
      box-shadow: none;
    }
    .drag-handle {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: #ffe8bf;
      border: 1px dashed var(--border-soft);
      cursor: grab;
      user-select: none;
    }

    .expense-card {
      background: #fff7ec;
      border: 1px dashed var(--border-soft);
      border-radius: 12px;
      padding: 8px 10px;
      margin-top: 8px;
      font-size: 12px;
      color: var(--brown-soft);
    }
    .expense-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 12px;
      color: var(--brown-main);
    }

    .quick-add {
      margin-top: 8px;
      padding: 8px 10px;
      border-radius: 10px;
      background: rgba(255, 253, 248, 0.9);
      border: 1px dashed var(--border-soft);
      font-size: 11px;
      color: var(--brown-soft);
    }
    .quick-add-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--brown-main);
    }
    .quick-add-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .quick-add-row input {
      flex: 1 1 130px;
      padding: 5px 8px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      font-size: 11px;
      font-family: inherit;
      color: var(--brown-main);
      background: #fffdf7;
    }
    .quick-add-row button {
      padding: 5px 10px;
      border-radius: 999px;
      border: none;
      font-size: 11px;
      background: #ffd48d;
      color: var(--brown-main);
      box-shadow: 0 1px 3px rgba(190, 150, 110, 0.5);
      cursor: pointer;
      flex: 0 0 auto;
    }

    .custom-section {
      border-top: 1px dashed var(--border-soft);
      margin-top: 20px;
      padding-top: 10px;
    }
    .custom-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--brown-main);
    }
    .custom-placeholder {
      border: 1px dashed var(--border-soft);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255, 253, 248, 0.95);
      font-size: 12px;
      color: var(--brown-soft);
      margin-top: 6px;
    }

    .editable-block { outline: none; }
    .editable-block:focus-within {
      box-shadow: 0 0 0 2px rgba(255, 212, 141, 0.9);
      border-color: #ffd48d;
    }
    .save-indicator {
      position: fixed;
      right: 16px;
      bottom: 76px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(90, 59, 50, 0.95);
      color: #fffdf7;
      font-size: 11px;
      opacity: 0;
      transition: opacity 0.25s ease;
      box-shadow: 0 2px 6px rgba(120, 90, 70, 0.7);
      z-index: 40;
    }
    .save-indicator.visible { opacity: 1; }

    .undo-btn {
      position: fixed;
      right: 16px;
      bottom: 20px;
      z-index: 50;
      border-radius: 999px;
      border: none;
      padding: 10px 14px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      background: #ffd48d;
      color: var(--brown-main);
      box-shadow: 0 3px 8px rgba(150, 110, 80, 0.65);
      cursor: pointer;
    }
    .undo-btn[disabled] {
      opacity: 0.5;
      box-shadow: none;
      cursor: default;
    }
  </style>
</head>
<body>
<header>
  <h1>Niji Trip 2026</h1>
  <p>æ±äº¬è¡Œç¨‹ Â· æš–è‰²ä¸»é¡Œ Â· æ‹–æ‹‰æ’åºï¼‹ä½å®¿æ¬„ä½ï¼‹æ¯æ—¥èŠ±è²»ï¼‹å›ä¸Šä¸€æ­¥</p>
  <div class="hint">âœï¸ æ¯ä¸€å¼µè¡Œç¨‹å¡å³ä¸‹éƒ½æœ‰ã€Œâ ¿ æ‹–æ‹‰èª¿æ•´é †åºã€ï¼Œé•·æŒ‰æ‹–æ›³å³å¯ä¸Šä¸‹èª¿æ•´æ’åºï¼›æ”¹éŒ¯å¯ç”¨å³ä¸‹è§’ã€Œå›ä¸Šä¸€æ­¥ã€ã€‚</div>
</header>

<div class="day-nav">
  <div class="day-nav-row">
    <a class="day-chip" href="#day-1"><span class="day-chip-main">Day 1</span><span class="day-chip-sub">5/8</span></a>
    <a class="day-chip" href="#day-2"><span class="day-chip-main">Day 2</span><span class="day-chip-sub">5/9</span></a>
    <a class="day-chip" href="#day-3"><span class="day-chip-main">Day 3</span><span class="day-chip-sub">5/10</span></a>
    <a class="day-chip" href="#day-4"><span class="day-chip-main">Day 4</span><span class="day-chip-sub">5/11</span></a>
    <a class="day-chip" href="#day-5"><span class="day-chip-main">Day 5</span><span class="day-chip-sub">5/12</span></a>
    <a class="day-chip" href="#day-6"><span class="day-chip-main">Day 6</span><span class="day-chip-sub">5/13</span></a>
    <a class="day-chip" href="#day-7"><span class="day-chip-main">Day 7</span><span class="day-chip-sub">5/14</span></a>
    <a class="day-chip" href="#day-8"><span class="day-chip-main">Day 8</span><span class="day-chip-sub">5/15</span></a>
    <a class="day-chip" href="#day-9"><span class="day-chip-main">Day 9</span><span class="day-chip-sub">5/16</span></a>
    <a class="day-chip" href="#day-10"><span class="day-chip-main">Day 10</span><span class="day-chip-sub">5/17</span></a>
    <a class="day-chip" href="#day-11"><span class="day-chip-main">Day 11</span><span class="day-chip-sub">5/18</span></a>
    <a class="day-chip" href="#day-12"><span class="day-chip-main">Day 12</span><span class="day-chip-sub">5/19</span></a>
    <a class="day-chip" href="#day-13"><span class="day-chip-main">Day 13</span><span class="day-chip-sub">5/20</span></a>
    <a class="day-chip" href="#day-14"><span class="day-chip-main">Day 14</span><span class="day-chip-sub">5/21</span></a>
  </div>
</div>

<div class="container" id="content">
<section id="day-1" data-date="5/8">
  <div class="day-title editable-block" contenteditable="true">Day 1 ï¼ˆ5/8ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">æˆç”°æ©Ÿå ´</div>
      <div class="name-ja">æˆç”°ç©ºæ¸¯</div>
      <div class="spot-meta">æˆç”°ãƒ»ä¸Šé‡ Â· æŠµé”æ—¥æœ¬</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="æˆç”°ç©ºæ¸¯" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="æˆç”°ç©ºæ¸¯" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-2" data-date="5/9">
  <div class="day-title editable-block" contenteditable="true">Day 2 ï¼ˆ5/9ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ç‰›å¥¶æ”¤ï¼ˆç§‹è‘‰åŸè»Šç«™å…§ï¼‰</div>
      <div class="name-ja">ãƒŸãƒ«ã‚¯ã‚¹ã‚¿ãƒ³ãƒ‰ ç§‹è‘‰åŸ</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»ç§‹è‘‰åŸ Â· è»Šç«™é£²å“å°åº—</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒŸãƒ«ã‚¯ã‚¹ã‚¿ãƒ³ãƒ‰ ç§‹è‘‰åŸ" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒŸãƒ«ã‚¯ã‚¹ã‚¿ãƒ³ãƒ‰ ç§‹è‘‰åŸ" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">å£½å±‹ ç§‹è‘‰åŸé¤¨</div>
      <div class="name-ja">ã‚³ãƒˆãƒ–ã‚­ãƒ¤ ç§‹è‘‰åŸé¤¨</div>
      <div class="spot-meta">ç§‹è‘‰åŸ Â· æ¨¡å‹ãƒ»å…¬ä»”</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ã‚³ãƒˆãƒ–ã‚­ãƒ¤ ç§‹è‘‰åŸé¤¨" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ã‚³ãƒˆãƒ–ã‚­ãƒ¤ ç§‹è‘‰åŸé¤¨" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-3" data-date="5/10">
  <div class="day-title editable-block" contenteditable="true">Day 3 ï¼ˆ5/10ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">å“ˆåˆ©æ³¢ç‰¹æ——è‰¦åº—ï¼ˆåŸå®¿ï¼‰</div>
      <div class="name-ja">ãƒãƒªãƒ¼ãƒ»ãƒãƒƒã‚¿ãƒ¼ ãƒ•ãƒ©ãƒƒã‚°ã‚·ãƒƒãƒ—åŸå®¿</div>
      <div class="spot-meta">åŸå®¿ãƒ»è¡¨åƒé“ Â· å‘¨é‚Šè–åœ°</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒãƒªãƒ¼ãƒ»ãƒãƒƒã‚¿ãƒ¼ ãƒ•ãƒ©ãƒƒã‚°ã‚·ãƒƒãƒ—åŸå®¿" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒãƒªãƒ¼ãƒ»ãƒãƒƒã‚¿ãƒ¼ ãƒ•ãƒ©ãƒƒã‚°ã‚·ãƒƒãƒ—åŸå®¿" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">Kiddy Land åŸå®¿åº—</div>
      <div class="name-ja">ã‚­ãƒ‡ã‚¤ãƒ©ãƒ³ãƒ‰åŸå®¿åº—</div>
      <div class="spot-meta">åŸå®¿ Â· å¡é€šé›œè²¨</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ã‚­ãƒ‡ã‚¤ãƒ©ãƒ³ãƒ‰åŸå®¿åº—" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ã‚­ãƒ‡ã‚¤ãƒ©ãƒ³ãƒ‰åŸå®¿åº—" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">æ˜æ²»ç¥å®®</div>
      <div class="name-ja">æ˜æ²»ç¥å®®</div>
      <div class="spot-meta">åŸå®¿ãƒ»ä»£ä»£æœ¨ Â· äººæ°£ç¥ç¤¾</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="æ˜æ²»ç¥å®®" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="æ˜æ²»ç¥å®®" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-4" data-date="5/11">
  <div class="day-title editable-block" contenteditable="true">Day 4 ï¼ˆ5/11ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">æ·ºè‰å¯º</div>
      <div class="name-ja">æµ…è‰å¯º</div>
      <div class="spot-meta">æ·ºè‰ Â· é›·é–€ãƒ»ä»²è¦‹ä¸–é€š</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="æµ…è‰å¯º" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="æµ…è‰å¯º" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-5" data-date="5/12">
  <div class="day-title editable-block" contenteditable="true">Day 5 ï¼ˆ5/12ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">çš†ä¸­ç¨»è·ç¥ç¤¾</div>
      <div class="name-ja">çš†ä¸­ç¨²è·ç¥ç¤¾</div>
      <div class="spot-meta">æ–°å®¿ Â· æ–°å®¿å°ç¥ç¤¾</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="çš†ä¸­ç¨²è·ç¥ç¤¾" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="çš†ä¸­ç¨²è·ç¥ç¤¾" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-6" data-date="5/13">
  <div class="day-title editable-block" contenteditable="true">Day 6 ï¼ˆ5/13ï¼‰</div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-7" data-date="5/14">
  <div class="day-title editable-block" contenteditable="true">Day 7 ï¼ˆ5/14ï¼‰</div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-8" data-date="5/15">
  <div class="day-title editable-block" contenteditable="true">Day 8 ï¼ˆ5/15ï¼‰</div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-9" data-date="5/16">
  <div class="day-title editable-block" contenteditable="true">Day 9 ï¼ˆ5/16ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">å¹•å¼µå±•è¦½é¤¨ï¼ˆNijiFesï¼‰</div>
      <div class="name-ja">å¹•å¼µãƒ¡ãƒƒã‚»</div>
      <div class="spot-meta">å¹•å¼µ Â· æ´»å‹•æœƒå ´</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="å¹•å¼µãƒ¡ãƒƒã‚»" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="å¹•å¼µãƒ¡ãƒƒã‚»" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-10" data-date="5/17">
  <div class="day-title editable-block" contenteditable="true">Day 10 ï¼ˆ5/17ï¼‰</div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-11" data-date="5/18">
  <div class="day-title editable-block" contenteditable="true">Day 11 ï¼ˆ5/18ï¼‰</div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-12" data-date="5/19">
  <div class="day-title editable-block" contenteditable="true">Day 12 ï¼ˆ5/19ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">æ©«æ¿± VIVRE å•†å ´</div>
      <div class="name-ja">æ¨ªæµœãƒ“ãƒ–ãƒ¬</div>
      <div class="spot-meta">æ©«æ¿± Â· ç™¾è²¨ãƒ»è³¼ç‰©</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="æ¨ªæµœãƒ“ãƒ–ãƒ¬" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="æ¨ªæµœãƒ“ãƒ–ãƒ¬" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">æ©«æ¿±é–‹é‹æ°´æ—é¤¨</div>
      <div class="name-ja">æ¨ªæµœé–‹é‹æ°´æ—é¤¨ ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒ³ã‚¢ã‚¯ã‚¢ãƒªã‚¦ãƒ </div>
      <div class="spot-meta">æ©«æ¿± Â· ä¸»é¡Œæ°´æ—é¤¨</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="æ¨ªæµœé–‹é‹æ°´æ—é¤¨ ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒ³ã‚¢ã‚¯ã‚¢ãƒªã‚¦ãƒ " contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="æ¨ªæµœé–‹é‹æ°´æ—é¤¨ ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒ³ã‚¢ã‚¯ã‚¢ãƒªã‚¦ãƒ " contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-13" data-date="5/20">
  <div class="day-title editable-block" contenteditable="true">Day 13 ï¼ˆ5/20ï¼‰</div>
  <div class="spot-card lodging-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">ä½å®¿ï¼šVESSEL INN ä¸Šé‡å…¥è°·ç«™ é£¯åº—</div>
      <div class="name-ja">ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰</div>
      <div class="spot-meta">ä¸Šé‡ãƒ»å…¥è°· Â· ä½å®¿åœ°é»</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

<section id="day-14" data-date="5/21">
  <div class="day-title editable-block" contenteditable="true">Day 14 ï¼ˆ5/21ï¼‰</div>
  <div class="spot-card editable-block" contenteditable="true">
    <div class="spot-text">
      <div class="name-zh">æˆç”°æ©Ÿå ´ï¼ˆå›ç¨‹ï¼‰</div>
      <div class="name-ja">æˆç”°ç©ºæ¸¯</div>
      <div class="spot-meta">æˆç”° Â· è¿”å°</div>
    </div>
    <div class="btn-row" contenteditable="false">
      <button class="btn btn-dir" data-dest-jp="æˆç”°ç©ºæ¸¯" contenteditable="false">å¾é£¯åº—å°èˆª</button>
      <button class="btn secondary btn-search" data-dest-jp="æˆç”°ç©ºæ¸¯" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>
      <span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>
    </div>
  </div>
  <div class="expense-card editable-block" contenteditable="true">
    <div class="expense-title">ç•¶æ—¥å‚™è¨»ï¼èŠ±è²»</div>
    <div>ä¾‹ï¼šé¤é£² xxx å…ƒã€äº¤é€š xxx å…ƒã€è³¼ç‰© xxx å…ƒã€å…¶ä»–å¿ƒå¾—â€¦â€¦</div>
  </div>
  <div class="quick-add">
    <div class="quick-add-title">ï¼‹ æ–°å¢è¡Œç¨‹å¡ç‰‡</div>
    <div class="quick-add-row">
      <input type="text" class="qa-name" placeholder="åœ°é»åç¨±ï¼ˆä¸­æ–‡ï¼‰" />
      <input type="text" class="qa-jp" placeholder="æ—¥æ–‡åç¨±æˆ–åœ°å€" />
      <button type="button" class="qa-btn" onclick="addSpot(this)">æ–°å¢</button>
    </div>
  </div>
</section>

  <div class="custom-section editable-block" contenteditable="true">
    <div class="custom-title">âœï¸ å…¶ä»–è£œå……è¨˜éŒ„ï¼ˆé ç•™ç©ºé–“ï¼‰</div>
    <div class="custom-placeholder">
      å¯åœ¨é€™è£¡è¨˜éŒ„æ•´è¶Ÿæ—…ç¨‹ç¸½èŠ±è²»ã€å›åœ‹å¾Œå¿ƒå¾—ã€æƒ³å†å»çš„åº—å®¶æ¸…å–®ç­‰ç­‰ã€‚
    </div>
  </div>
</div>

<button class="undo-btn" id="undoBtn" disabled>ğŸ•˜ å›ä¸Šä¸€æ­¥</button>
<div class="save-indicator" id="saveIndicator">å·²è‡ªå‹•å„²å­˜</div>

<script>
const STORAGE_KEY = "nijiTrip2026_warm_addspot_lodging_drag_v5";
const MAX_HISTORY = 20;
const HOTEL_JP = "ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³ä¸Šé‡å…¥è°·é§…å‰";

const container = document.getElementById("content");
const undoBtn = document.getElementById("undoBtn");
const saveIndicator = document.getElementById("saveIndicator");

let historyStack = [];
let saveTimer = null;
let isRestoring = false;
let draggedCard = null;

function buildSearchUrl(nameJp) {
  return "https://www.google.com/maps/search/?api=1&query=" + encodeURIComponent(nameJp);
}
function buildDirectionUrl(destinationJp) {
  return "https://www.google.com/maps/dir/?api=1&origin=" +
    encodeURIComponent(HOTEL_JP) +
    "&destination=" + encodeURIComponent(destinationJp);
}

function pushHistory() {
  const html = container.innerHTML;
  if (historyStack.length >= MAX_HISTORY) historyStack.shift();
  historyStack.push(html);
  updateUndoButton();
}

function showSavedIndicator() {
  saveIndicator.classList.add("visible");
  setTimeout(() => saveIndicator.classList.remove("visible"), 1200);
}

function scheduleSave() {
  if (isRestoring) return;
  if (saveTimer) clearTimeout(saveTimer);
  pushHistory();
  saveTimer = setTimeout(() => {
    try {
      localStorage.setItem(STORAGE_KEY, container.innerHTML);
      showSavedIndicator();
    } catch (e) {
      console.warn("ç„¡æ³•å„²å­˜åˆ° localStorage", e);
    }
  }, 400);
}

function attachEditHandlers() {
  const blocks = container.querySelectorAll(".editable-block");
  blocks.forEach(b => {
    b.removeEventListener("input", scheduleSave);
    b.addEventListener("input", scheduleSave);
  });
}

function updateUndoButton() {
  undoBtn.disabled = historyStack.length <= 1;
}

undoBtn.addEventListener("click", () => {
  if (historyStack.length <= 1) return;
  historyStack.pop();
  const prev = historyStack[historyStack.length - 1];
  isRestoring = true;
  container.innerHTML = prev;
  attachEditHandlers();
  isRestoring = false;
  try {
    localStorage.setItem(STORAGE_KEY, prev);
  } catch (e) {
    console.warn("ç„¡æ³•å„²å­˜åˆ° localStorage", e);
  }
  updateUndoButton();
});

function addSpot(btn) {
  const section = btn.closest("section");
  if (!section) return;
  const nameInput = section.querySelector(".qa-name");
  const jpInput = section.querySelector(".qa-jp");
  if (!nameInput || !jpInput) return;
  const name = nameInput.value.trim();
  const jp = jpInput.value.trim();
  if (!name || !jp) {
    alert("è«‹å…ˆè¼¸å…¥åœ°é»åç¨±å’Œæ—¥æ–‡åç¨±ï¼åœ°å€");
    return;
  }
  const expenseCard = section.querySelector(".expense-card");
  const card = document.createElement("div");
  card.className = "spot-card editable-block";
  card.setAttribute("contenteditable", "true");
  card.innerHTML =
    '<div class="spot-text">' +
      '<div class="name-zh">' + name + '</div>' +
      '<div class="name-ja">' + jp + '</div>' +
      '<div class="spot-meta">è‡ªè¨‚è¡Œç¨‹ Â· æ‰‹å‹•æ–°å¢</div>' +
    '</div>' +
    '<div class="btn-row" contenteditable="false">' +
      '<button class="btn btn-dir" data-dest-jp="' + jp + '" contenteditable="false">å¾é£¯åº—å°èˆª</button>' +
      '<button class="btn secondary btn-search" data-dest-jp="' + jp + '" contenteditable="false">åœ¨åœ°åœ–ä¸Šæœå°‹</button>' +
      '<span class="drag-handle" draggable="true" contenteditable="false">â ¿ æ‹–æ‹‰èª¿æ•´é †åº</span>' +
    '</div>';
  section.insertBefore(card, expenseCard);
  nameInput.value = "";
  jpInput.value = "";
  attachEditHandlers();
  scheduleSave();
}

container.addEventListener("click", (e) => {
  const dirBtn = e.target.closest(".btn-dir");
  const searchBtn = e.target.closest(".btn-search");
  if (dirBtn) {
    const dest = dirBtn.getAttribute("data-dest-jp");
    if (dest) window.open(buildDirectionUrl(dest), "_blank");
    return;
  }
  if (searchBtn) {
    const dest = searchBtn.getAttribute("data-dest-jp");
    if (dest) window.open(buildSearchUrl(dest), "_blank");
    return;
  }
});

// Drag-and-drop handlers
container.addEventListener("dragstart", (e) => {
  const handle = e.target.closest(".drag-handle");
  if (!handle) return;
  const card = handle.closest(".spot-card");
  if (!card) return;
  draggedCard = card;
  draggedCard.classList.add("dragging");
  e.dataTransfer.effectAllowed = "move";
  e.dataTransfer.setData("text/plain", "");
});

container.addEventListener("dragend", (e) => {
  if (draggedCard) {
    draggedCard.classList.remove("dragging");
    draggedCard = null;
    scheduleSave();
  }
});

function getDragAfterElement(section, y) {
  const cards = [...section.querySelectorAll(".spot-card:not(.dragging)")];
  let closest = null;
  let closestOffset = Number.NEGATIVE_INFINITY;
  cards.forEach(card => {
    const rect = card.getBoundingClientRect();
    const offset = y - (rect.top + rect.height / 2);
    if (offset < 0 && offset > closestOffset) {
      closestOffset = offset;
      closest = card;
    }
  });
  return closest;
}

container.addEventListener("dragover", (e) => {
  if (!draggedCard) return;
  const section = e.target.closest("section");
  if (!section || !section.contains(draggedCard)) return;
  e.preventDefault();
  const afterElement = getDragAfterElement(section, e.clientY);
  const expenseCard = section.querySelector(".expense-card");
  if (!expenseCard) return;
  if (afterElement == null) {
    // æ”¾åœ¨æœ€å¾Œä¸€å€‹è¡Œç¨‹å¡ç‰‡å‰é¢ï¼ˆä½†ä»åœ¨ expenseCard ä¹‹å‰ï¼‰
    section.insertBefore(draggedCard, expenseCard);
  } else {
    section.insertBefore(draggedCard, afterElement);
  }
});

// åˆå§‹åŒ–
(function init() {
  const saved = localStorage.getItem(STORAGE_KEY);
  if (saved && saved.length > 0) {
    container.innerHTML = saved;
  }
  attachEditHandlers();
  historyStack = [container.innerHTML];
  updateUndoButton();
})();
</script>
</body>
</html>
